<template>
  <require from="./search.scss"></require>
  <form action="/" target="_self" method="get">
    <div class="mdc-layout-grid">
      <div class="mdc-layout-grid__inner">
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-11">
          <mdc-text-field name="q" value.two-way="model.q" outlined label="Search" style="width: 100%; height: 36px;"></mdc-text-field>        
        </div>
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-1">
          <input type="submit" value="Search" mdc-button unelevated class="big-round-shape-button">
        </div>

      </div>
    </div>


    <div class="search-form__filter-wrapper">

      <div if.bind="displayModel.searchFor.length"
           class="search-form__item _align-right">
        <label><input type="checkbox" name="withCherry" checked.bind="model.withCherry">Cherry</label>
        <label><input type="checkbox" name="withApple" checked.bind="model.withApple">Apple</label>
      </div>


      <div class="search-form__item _align-left">
        <span class="search-form__toggle-btn"
              click.delegate="toggle = !toggle">filter</span>
          <div>
            <div if.bind="toggle"

                 class="search-form__wrapper-collection-filter">

              <div class="search-form__sub-menu"
                   mdc-menu-surface-anchor>
                <span click.delegate="searchIn.open = !searchIn.open">filter-1</span>
                <mdc-menu view-model.ref="searchIn" anchor.bind="cardAnchor" default-focus-state1="FIRST_ITEM">
                  <mdc-list>
                    <mdc-list-item>titles</mdc-list-item>
                    <mdc-list-item>Content</mdc-list-item>
                    <mdc-list-item>Memo's Titles</mdc-list-item>
                    <mdc-list-item>Memo's Content</mdc-list-item>
                  </mdc-list>
                </mdc-menu>
              </div>
              <div class="search-form__sub-menu"
                   mdc-menu-surface-anchor>
                <span click.delegate="dateOfPresentation.open = !dateOfPresentation.open">filter-2</span>
                <mdc-menu view-model.ref="dateOfPresentation" anchor.bind="cardAnchor" default-focus-state1="FIRST_ITEM">
                  <mdc-list>
                    <mdc-list-item>Any Time</mdc-list-item>
                    <mdc-list-item>Past hour</mdc-list-item>
                    <mdc-list-item>Past 24 hours</mdc-list-item>
                    <mdc-list-item>Past week</mdc-list-item>
                    <mdc-list-item>Past month</mdc-list-item>
                    <mdc-list-item>Past year</mdc-list-item>
                    <mdc-list-item>Past Custom range</mdc-list-item>
                  </mdc-list>
                </mdc-menu>
              </div>
              <div class="search-form__sub-menu"
                   mdc-menu-surface-anchor>
                <span click.delegate="bugs.open = !bugs.open">filter-1</span>
                <mdc-menu view-model.ref="bugs" anchor.bind="cardAnchor" default-focus-state1="FIRST_ITEM">
                  <mdc-list>
                    <mdc-list-item>Appeals</mdc-list-item>
                    <mdc-list-item>Legal Case</mdc-list-item>
                    <mdc-list-item>Court Type</mdc-list-item>
                    <mdc-list-item>Type of Interest</mdc-list-item>
                    <mdc-list-item>Procedure</mdc-list-item>
                    <mdc-list-item>Process</mdc-list-item>
                  </mdc-list>
                </mdc-menu>
              </div>
            </div>
          </div>
      </div>



    </div>



    <br>
    <br>
    

    <br><br>
    <div>Search For: ${displayModel.searchFor ? displayModel.searchFor : 'HUY'}</div>
    <br><br>
    <div>Query: ${displayModel.router}</div>

    <br><br><br><br>

    <div>
      <div class="mdc-layout-grid">
        <!-- The item starts here -->
        <div class="mdc-layout-grid__inner search-item" repeat.for="item of data.items">
          <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
            <div class="mdc-layout-grid__inner">
              <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4">
                <a href="#" title="Link to Main Case of the Document">
                  ${item.document.title}
                </a>
              </div>
              <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4">
                <a href="#" title="Link to Main Case of the Document">
                  ${item.mainCase.id}
                </a>
              </div>
              <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4">
                <a repeat.for="filter of item.filteredWith" href="#">${filter.value}</a>
              </div>
            </div>
            <div class="mdc-layout-grid__inner">
              <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
                <span repeat.for="fragment of item.fragments">
                  <span repeat.for="word of fragment.text.split(' ')" class="${getHighlightItemIndex($index, fragment) ? 'text-fragment__highlight' : ''}">${word}${$last ? '...': ' '}</span>
                </span>
              </div>
            </div>
            <div class="mdc-layout-grid__inner">
              <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
                <mdc-expandable  class="mdc-expandable"
                                 accordion>
                  <div slot="caption">
                    <div class="caption__item">
                      <span class="caption__item-text">דירוג:</span>
                      <span class="caption__item-text" repeat.for="rank of item.ranks">
                        <span>${rank.name} - ${rank.value}</span>
                      </span>
                    </div>
                    <div class="caption__item">
                      <span class="caption__item-text">quibusdam</span>
                    </div>
                  </div>
                  <div class="content__wrapper">
                    <div class="content-item">
                      <span class="content__item-title"><b>ישויות:</b></span>
                      <div class="content-item-body">
                        something...
                      </div>
                    </div>
                    <div class="content__item">
                    <span class="content__item-title"><b>תיקים קשורים:</b></span>
                      <div class="content__item-body">
                        something...
                      </div>
                    </div>
                  </div>
                </mdc-expandable>
              </div>
            </div>
            <div class="mdc-layout-grid__inner">
            </div>
          </div>          
        </div>        
        <!-- The item ends here -->
      </div>      
    </div>
    
  </form>
</template>
